<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This Learning Journey enables cloud operators and developers to deliver cloud-native solutions with Red Hat OpenShift in hybrid cloud environments."><meta name=author content="Ecosystem Engineering"><link href=https://learning-journey.cloudnativetoolkit.dev/developer-intermediate/inventory-bff/ rel=canonical><link rel=icon href=../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.1"><title>BFF - TechZone Automation - Cloud-Native Learning Journey</title><link rel=stylesheet href=../../assets/stylesheets/main.69437709.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cbb835fc.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><link rel=stylesheet href=../../css/extra.css><link rel=stylesheet href=../../css/toolkit-code.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-155887541-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){if(document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document.forms.feedback){var e,a=document.forms.feedback;for(e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="TechZone Automation - Cloud-Native Learning Journey - BFF"><meta property=og:description content="This Learning Journey enables cloud operators and developers to deliver cloud-native solutions with Red Hat OpenShift in hybrid cloud environments."><meta content=https://learning-journey.cloudnativetoolkit.dev/developer-intermediate/inventory-bff/ property=og:url><meta property=og:image content=https://learning-journey.cloudnativetoolkit.dev/assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#setup class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="TechZone Automation - Cloud-Native Learning Journey" class="md-header__button md-logo" aria-label="TechZone Automation - Cloud-Native Learning Journey" data-md-component=logo> <img src=../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TechZone Automation - Cloud-Native Learning Journey </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> BFF </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ibm-ecosystem-lab/ibm-gsi-cloudnative-journey title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../.."
      title="TechZone Automation - Cloud-Native Learning Journey"
      class="md-nav__button md-logo"
      aria-label="TechZone Automation - Cloud-Native Learning Journey"
      data-md-component="logo"
    >
      
  <img src="../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    TechZone Automation - Cloud-Native Learning Journey
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.com/ibm-ecosystem-lab/ibm-gsi-cloudnative-journey title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Introduction <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Introduction data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Introduction </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../getting-started/prereqs/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../getting-started/checksetup/ class=md-nav__link> Validate Environment </a> </li> <li class=md-nav__item> <a href=../../getting-started/devenvsetup/ class=md-nav__link> Developer Tools Setup </a> </li> <li class=md-nav__item> <a href=../../getting-started/cli/ class=md-nav__link> Developer Tools CLI </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Developer Foundation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Foundation" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Developer Foundation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-foundation/ class=md-nav__link> Agenda </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/cloud-native-overview/ class=md-nav__link> What is Cloud-Native? </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/cloud-native-app-dev/ class=md-nav__link> Cloud-Native App Dev </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/containers/ class=md-nav__link> Containers Overview </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-overview/ class=md-nav__link> Kubernetes 'overview' </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/openshift/ class=md-nav__link> Openshift 'overview' </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-core-concepts/ class=md-nav__link> Core Concepts </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-multi-container-pods/ class=md-nav__link> Multi-Container Pods </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-observability/ class=md-nav__link> Observability </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-pod-design/ class=md-nav__link> Pod Design </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-services-networking/ class=md-nav__link> Services & Networking </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-state-persistence/ class=md-nav__link> State Persistence </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-troubleshooting/ class=md-nav__link> Troubleshoot </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/garage-development/ class=md-nav__link> Garage Method </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Developer Intermediate <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Intermediate" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Developer Intermediate </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Agenda </a> </li> <li class=md-nav__item> <a href=../deploy-app/ class=md-nav__link> Deploy First App </a> </li> <li class=md-nav__item> <a href=../continuous-delivery/ class=md-nav__link> Continuous Delivery </a> </li> <li class=md-nav__item> <a href=../content-overview/ class=md-nav__link> DevSecOps Overview </a> </li> <li class=md-nav__item> <a href=../continuous-integration/ class=md-nav__link> Continuous Integration </a> </li> <li class=md-nav__item> <a href=../artifact-management/ class=md-nav__link> Artifact Management </a> </li> <li class=md-nav__item> <a href=../code-analysis/ class=md-nav__link> Code Analysis </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Image Registry <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Image Registry" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Image Registry </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ocp-registry/ class=md-nav__link> OpenShift </a> </li> <li class=md-nav__item> <a href=../image-registry/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_9 type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9> Log Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Log Management" data-md-level=2> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Log Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ocp-log-management/ class=md-nav__link> OpenShift </a> </li> <li class=md-nav__item> <a href=../log-management/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_10 type=checkbox id=__nav_3_10> <label class=md-nav__link for=__nav_3_10> Monitoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Monitoring data-md-level=2> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ocp-monitoring/ class=md-nav__link> OpenShift </a> </li> <li class=md-nav__item> <a href=../monitoring/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_11 type=checkbox id=__nav_3_11 checked> <label class=md-nav__link for=__nav_3_11> Inventory App <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Inventory App" data-md-level=2> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> Inventory App </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../inventory-application/ class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../inventory-prebuilt-solution/ class=md-nav__link> Solution </a> </li> <li class=md-nav__item> <a href=../inventory-service/ class=md-nav__link> Service </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> BFF <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> BFF </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#setup class=md-nav__link> Setup </a> <nav class=md-nav aria-label=Setup> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-your-openshift-project-and-register-the-pipeline class=md-nav__link> Create your OpenShift project and register the pipeline </a> </li> <li class=md-nav__item> <a href=#choose-your-development-environment class=md-nav__link> Choose your development environment </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-the-rest-interface class=md-nav__link> Create the REST interface </a> </li> <li class=md-nav__item> <a href=#update-the-controller-to-call-a-service class=md-nav__link> Update the controller to call a service </a> </li> <li class=md-nav__item> <a href=#add-a-graphql-implementation-of-stock-items class=md-nav__link> Add a GraphQL implementation of Stock Items </a> </li> <li class=md-nav__item> <a href=#create-a-service-implementation-that-calls-the-microservice class=md-nav__link> Create a service implementation that calls the microservice </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../inventory-ui/ class=md-nav__link> UI </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Developer Advanced <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Advanced" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Developer Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-advanced-1/inventory-cd/ class=md-nav__link> CD for Inventory App </a> </li> <li class=md-nav__item> <a href=../../developer-advanced-1/database-with-cloudant/ class=md-nav__link> Database with Cloudant </a> </li> <li class=md-nav__item> <a href=../../developer-advanced-1/database-with-mongodb/ class=md-nav__link> Database with MongoDB </a> </li> <li class=md-nav__item> <a href=../../developer-advanced-1/inventory-appid/ class=md-nav__link> Authentication with AppID </a> </li> <li class=md-nav__item> <a href=../../developer-advanced-1/code-engine/ class=md-nav__link> Code Engine </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#setup class=md-nav__link> Setup </a> <nav class=md-nav aria-label=Setup> <ul class=md-nav__list> <li class=md-nav__item> <a href=#create-your-openshift-project-and-register-the-pipeline class=md-nav__link> Create your OpenShift project and register the pipeline </a> </li> <li class=md-nav__item> <a href=#choose-your-development-environment class=md-nav__link> Choose your development environment </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-the-rest-interface class=md-nav__link> Create the REST interface </a> </li> <li class=md-nav__item> <a href=#update-the-controller-to-call-a-service class=md-nav__link> Update the controller to call a service </a> </li> <li class=md-nav__item> <a href=#add-a-graphql-implementation-of-stock-items class=md-nav__link> Add a GraphQL implementation of Stock Items </a> </li> <li class=md-nav__item> <a href=#create-a-service-implementation-that-calls-the-microservice class=md-nav__link> Create a service implementation that calls the microservice </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ibm-ecosystem-lab/ibm-gsi-cloudnative-journey/edit/main/docs/developer-intermediate/inventory-bff/index.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1>BFF</h1> <!--- cSpell:ignore templatized ICPA openshiftconsole Theia userid toolset crwexposeservice gradlew bluemix ocinstall Mico crwopenlink crwopenapp swaggerui gitpat gituser  buildconfig yourproject wireframe devenvsetup viewapp crwopenlink  atemplatized rtifactoryurlsetup Kata Koda configmap Katacoda checksetup cndp katacoda checksetup Linespace igccli regcred REPLACEME Tavis pipelinerun openshiftcluster invokecloudshell cloudnative sampleapp bwoolf hotspots multicloud pipelinerun Sricharan taskrun Vadapalli Rossel REPLACEME cloudnativesampleapp artifactoryuntar untar Hotspot devtoolsservices Piyum Zonooz Farr Kamal Arora Laszewski  Roadmap roadmap Istio Packt buildpacks automatable ksonnet jsonnet targetport podsiks SIGTERM SIGKILL minikube apiserver multitenant kubelet multizone Burstable checksetup handson  stockbffnode codepatterns devenvsetup newwindow preconfigured cloudantcredentials apikey Indexyaml classname  errorcondition tektonpipeline gradlew gitsecret viewapp cloudantgitpodscreen crwopenlink cdply crwopenapp desktoplaptop --> <p><strong>Develop and deploy the BFF component of the inventory application</strong></p> <p>The Inventory BFF's role in the architecture is to act as an orchestrator between the core business services and the specific digital channel it is focused on supporting. This class article will give you more detail about the <a href=https://samnewman.io/patterns/architectural/bff/ >Backend For Frontend architectural pattern</a> and the benefits.</p> <table> <thead> <tr> <th align=center><img alt="BFF Overview" src=images/bff-overview.jpeg></th> </tr> </thead> <tbody> <tr> <td align=center><em>Backend For Frontend pattern Overview - <a href=https://samnewman.io/patterns/architectural/bff/ >source</a></em></td> </tr> </tbody> </table> <p>The Inventory solution will use <a href=https://graphql.org/ >GraphQL</a> for its BFF layer, which enables the API to be dynamically controlled from the client using API queries. Follow the steps below to get started.</p> <h2 id=setup>Setup<a class=headerlink href=#setup title="Permanent link">&para;</a></h2> <h3 id=create-your-openshift-project-and-register-the-pipeline>Create your OpenShift project and register the pipeline<a class=headerlink href=#create-your-openshift-project-and-register-the-pipeline title="Permanent link">&para;</a></h3> <ul> <li> <p>Create a new repository from the <a href=https://github.com/IBM/template-graphql-typescript/generate>Typescript GraphQL template</a>.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>If you are developing on a shared education cluster, place the repository in the <strong>Git Organization</strong> listed in your notification email and remember to add your initials as a suffix to the app name. - In order to prevent naming collisions, name the repository <code>inv-bff-{your initials}</code> replacing <code>{your initials}</code> with your actual initials.</p> </div> </li> <li> <p>Deploy this application with Tekton pipelines :</p> </li> </ul> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Using OpenShift web terminal</label><label for=__tabbed_1_2>Using your local terminal</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li> <p>In the OpenShift web console, head up to <strong>Topology</strong> menu on the left on the <strong>Developer</strong> perspective and click <strong>Create a new project</strong>.</p> </li> <li> <p>Give a name to your project, call it <code>dev-{your initials}</code>, the other fields are optional.</p> </li> <li> <p>Initialize a web terminal using the <code>&gt;_</code> button on the top bar next to your name on the cluster. You should have a terminal with all the necessary development tools.</p> </li> </ul> </div> <div class=tabbed-block> <div class="admonition note"> <p class=admonition-title>Note</p> <p>You should have the <code>oc</code> and <code>igc</code> command line tools installed. If not, refer to the <a href=/getting-started/devenvsetup/#tools-installation-on-desktoplaptop>developers tools setup page</a>.</p> </div> <ul> <li> <p>In the OpenShift web console, click on email address top right, click on <strong>Copy login command</strong> and get the OpenShift login command, which includes a token.</p> </li> <li> <p>Click on <strong>Display Token</strong>, copy the Login with the token. oc login command will log you in. Run the login command in your terminal:</p> </li> </ul> <div class=highlight><pre><span></span><code>$ oc login --token<span class=o>=</span>qvARHflZDlOYfjJZRJUEs53Yfy4F8aa6_L3ezoagQFM --server<span class=o>=</span>https://c103-e.us-south.containers.cloud.ibm.com:30979
Logged into <span class=s2>&quot;https://c103-e.us-south.containers.cloud.ibm.com:30979&quot;</span> as <span class=s2>&quot;IAM#email@company&quot;</span> using the token provided.

You have access to <span class=m>71</span> projects, the list has been suppressed. You can list all projects with <span class=s1>&#39;oc projects&#39;</span>
</code></pre></div> </div> </div> </div> <ul> <li>Run the following command to setup your project:</li> </ul> <div class=highlight><pre><span></span><code>oc sync dev-{your initials} 
</code></pre></div> <ul> <li><a href=/developer-intermediate/deploy-app#5-register-the-application-in-a-openshift-pipeline>Register the pipeline</a>, give git credentials if prompted, and <code>main</code> as the git branch to use. When prompted for the pipeline, select <code>ibm-nodejs</code>. </li> </ul> <div class=highlight><pre><span></span><code>oc pipeline --tekton https://github.com/cnw-team-{team}/inv-bff-{your initials}
</code></pre></div> <ul> <li> <p><a href=/developer-intermediate/deploy-app/#5-register-the-application-in-a-openshift-pipeline>Open the pipeline</a> to see it running</p> </li> <li> <p>When the pipeline is completed, run <code>oc endpoints -n dev-{your initials}</code>. You should see an entry for the app we just pushed. Select the entry and hit <code>Enter</code> to launch the browser.</p> </li> </ul> <h3 id=choose-your-development-environment>Choose your development environment<a class=headerlink href=#choose-your-development-environment title="Permanent link">&para;</a></h3> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>Gitpod</label><label for=__tabbed_2_2>Locally</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li> <p>Head over to <a href=https://gitpod.io>gitpod.io</a>, login with your github account by clicking <strong>Continue with GitHub</strong>.</p> </li> <li> <p>Grant access to gitpod to your GitHub organization by going to account settings on the top right corner, navigate to <strong>Integrations</strong>, go to GitHub and click <strong>Manage on GitHub</strong>.</p> </li> <li> <p>On GitHub, search the organization you have used to create the repository and click <strong>grant</strong> to allow gitpod to access repositories in that organization.</p> </li> <li> <p>Back to <a href=https://gitpod.io/workspaces>gitpod.io</a>, navigate to workspaces and click <strong>New Workspace</strong> to create a new workspace, give it your newly created repository URL.</p> </li> <li> <p>If it is your first gitpod workspace, it will ask you for your preferred editor, pick the in browser Visual Studio Code, and the workspace will be created automatically for you.</p> </li> </ul> <p>You are now ready to modify the application!</p> </div> <div class=tabbed-block> <p>Clone the project and open it using your favorite text editor or IDE (Visual Studio Code, Atom...).</p> <div class=highlight><pre><span></span><code>git clone https://github.com/cnw-team-<span class=o>{</span>team<span class=o>}</span>/inv-bff-<span class=o>{</span>your initials<span class=o>}</span>.git
<span class=nb>cd</span> inv-bff-<span class=o>{</span>your initials<span class=o>}</span>
code .
</code></pre></div> </div> </div> </div> <h2 id=create-the-rest-interface>Create the REST interface<a class=headerlink href=#create-the-rest-interface title="Permanent link">&para;</a></h2> <p>The controller provides the REST interface for our BFF. The template uses the <code>typescript-rest</code> package to simplify the tasks required to create a controller.</p> <p>Since we will be developing this microservice following the <a href=https://en.wikipedia.org/wiki/Test-driven_development>Test Driven Development</a> approach, we are first going to create the test for our <code>stock-items</code> controller.</p> <ul> <li> <p>Start the tests by running the following command in a new terminal that you will keep running while running the lab: <div class=highlight><pre><span></span><code>npm run tdd
</code></pre></div></p> </li> <li> <p>Create the controller test: <div class=highlight><span class=filename>test/controllers/stock-items.controller.spec.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=nx>Application</span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;express&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>request</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;supertest&#39;</span><span class=p>;</span><span class=w></span>

<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=nx>buildApiServer</span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../helper&#39;</span><span class=p>;</span><span class=w></span>

<span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;stock-item.controller&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>

<span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>app</span><span class=o>:</span><span class=w> </span><span class=kt>Application</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=nx>beforeEach</span><span class=p>(</span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>apiServer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>buildApiServer</span><span class=p>();</span><span class=w></span>

<span class=w>    </span><span class=nx>app</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>apiServer</span><span class=p>.</span><span class=nx>getApp</span><span class=p>();</span><span class=w></span>
<span class=w>  </span><span class=p>});</span><span class=w></span>

<span class=w>  </span><span class=nx>test</span><span class=p>(</span><span class=s1>&#39;canary verifies test infrastructure&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nx>expect</span><span class=p>(</span><span class=kc>true</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span><span class=w></span>
<span class=w>  </span><span class=p>});</span><span class=w></span>

<span class=w>  </span><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;given GET /stock-items&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;when service is successful&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>      </span><span class=nx>test</span><span class=p>(</span><span class=s1>&#39;then return 200 status&#39;</span><span class=p>,</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nx>request</span><span class=p>(</span><span class=nx>app</span><span class=p>).</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/stock-items&#39;</span><span class=p>).</span><span class=nx>expect</span><span class=p>(</span><span class=mf>200</span><span class=p>);</span><span class=w></span>
<span class=w>      </span><span class=p>});</span><span class=w></span>

<span class=w>      </span><span class=nx>test</span><span class=p>(</span><span class=s1>&#39;then should return an empty array&#39;</span><span class=p>,</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nx>request</span><span class=p>(</span><span class=nx>app</span><span class=p>).</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/stock-items&#39;</span><span class=p>).</span><span class=nx>expect</span><span class=p>([]);</span><span class=w></span>
<span class=w>      </span><span class=p>});</span><span class=w></span>
<span class=w>    </span><span class=p>});</span><span class=w></span>
<span class=w>  </span><span class=p>});</span><span class=w></span>
<span class=p>});</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Notice that tests are now failing for the nex tests.</p> </li> <li> <p>Create the controller component: <div class=highlight><span class=filename>src/controllers/stock-items.controller.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=nx>GET</span><span class=p>,</span><span class=w> </span><span class=nx>Path</span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typescript-rest&#39;</span><span class=p>;</span><span class=w></span>

<span class=kd>@Path</span><span class=p>(</span><span class=s1>&#39;stock-items&#39;</span><span class=p>)</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>StockItemsController</span><span class=w> </span><span class=p>{</span><span class=w></span>

<span class=w>  </span><span class=kd>@GET</span><span class=w></span>
<span class=w>  </span><span class=k>async</span><span class=w> </span><span class=nx>listStockItems</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>any</span><span class=p>[]</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>[];</span><span class=w></span>
<span class=w>  </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Add the controller to the controllers <code>index.ts</code>. (Using <code>index.ts</code> is a good way to manage which components are exposed by a component and provide a good way to load the modules that will be injected into other components): <div class=highlight><span class=filename>src/controllers/index.ts</span><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./hello-world.controller&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./health.controller&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-items.controller&#39;</span><span class=p>;</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Start the service to see it running: <div class=highlight><pre><span></span><code>npm start
</code></pre></div></p> </li> <li> <p>Access the running service. This service runs on port <code>3000</code>:</p> </li> </ul> <div class="tabbed-set tabbed-alternate" data-tabs=3:2><input checked=checked id=__tabbed_3_1 name=__tabbed_3 type=radio><input id=__tabbed_3_2 name=__tabbed_3 type=radio><div class=tabbed-labels><label for=__tabbed_3_1>Gitpod</label><label for=__tabbed_3_2>Desktop/Laptop</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li>Once you run the application, Gitpod gives the option to make the port <strong>Public</strong>, in the bottom-right corner.Once you make the port Public, it gives you the option to <strong>Open Preview</strong> or <strong>Open Browser</strong>.</li> </ul> </div> <div class=tabbed-block> <ul> <li> <p>Open a browser to <code>http://localhost:3000/api-docs</code> to see the swagger page</p> </li> <li> <p>Expand our service from the list, click <code>Try it out</code>, then click <code>Execute</code></p> </li> </ul> </div> </div> </div> <ul> <li> <p>Push the changes we've made to the repository: <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s2>&quot;Adds stock items controller&quot;</span>
git push
</code></pre></div></p> </li> <li> <p>On the openshift console, open the <a href=../deploy-app/#6-view-your-application-pipeline>pipeline to see it running</a>.</p> </li> </ul> <h2 id=update-the-controller-to-call-a-service>Update the controller to call a service<a class=headerlink href=#update-the-controller-to-call-a-service title="Permanent link">&para;</a></h2> <p>The pattern recommended for the REST controllers is to let it focus on translating REST protocols into javascript and to put the business logic in a separate service component.</p> <p>The pattern recommended for the REST controllers is to let it focus on translating REST protocols into javascript and to put the business logic in a separate service component.</p> <ul> <li> <p>Add a StockItem model that contains the values needed for the UI: <div class=highlight><span class=filename>src/models/stock-item.model.ts</span><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>StockItemModel</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=nx>stock</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=nx>unitPrice</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=nx>manufacturer</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=nx>picture</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Register the model with the <code>index.ts</code> file in the models directory. Append this to end of the file: <div class=highlight><span class=filename>src/models/index.ts</span><pre><span></span><code><span class=p>...</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-item.model&#39;</span><span class=p>;</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Define an abstract class to provide the interface for our API: <div class=highlight><span class=filename>src/services/stock-items.api.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemModel</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../models&#39;</span><span class=p>;</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=k>abstract</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>StockItemsApi</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>abstract</span><span class=w> </span><span class=nx>listStockItems</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>StockItemModel</span><span class=p>[]</span><span class=o>&gt;</span><span class=p>;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p><strong>Why an abstract class and not an interface?</strong> TypeScript introduces both abstract classes and interfaces. When TypeScript gets transpiled into JavaScript, abstract classes are generated as classes but interfaces disappear since there isn't an equivalent type in JavaScript. As a result, they cannot be used as a binding type for the <code>typescript-ioc</code> framework. Fortunately, abstract classes can be used and they have the quirky behavior in TypeScript allowing them to either be <code>extended</code> like a class or <code>implemented</code> like an interface.</p> </div> </li> <li> <p>Add the abstract class to the <code>index.ts</code> file in the services directory. Add it to the end of other export statements, do not overwrite the file: <div class=highlight><span class=filename>src/services/index.ts</span><pre><span></span><code><span class=p>...</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-items.api&#39;</span><span class=p>;</span><span class=w></span>
<span class=p>...</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Lets create an implementation that will provide mock data for now. Add a <code>stock-items-mock.service</code> to services: <div class=highlight><span class=filename>src/services/stock-items-mock.service.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemsApi</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-items.api&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemModel</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../models&#39;</span><span class=p>;</span><span class=w></span>


<span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>StockItemsMockService</span><span class=w> </span><span class=k>implements</span><span class=w> </span><span class=nx>StockItemsApi</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=k>async</span><span class=w> </span><span class=nx>listStockItems</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>StockItemModel</span><span class=p>[]</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>[</span><span class=w></span>
<span class=w>      </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;1&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Self-sealing stem bolt&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>stock</span><span class=o>:</span><span class=w> </span><span class=kt>10</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>unitPrice</span><span class=o>:</span><span class=w> </span><span class=kt>10.5</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>picture</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;https://via.placeholder.com/32.png&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>manufacturer</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Bajor Galactic&quot;</span><span class=w></span>
<span class=w>      </span><span class=p>},</span><span class=w></span>
<span class=w>      </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;2&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Heisenberg compensator&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>stock</span><span class=o>:</span><span class=w> </span><span class=kt>20</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>unitPrice</span><span class=o>:</span><span class=w> </span><span class=kt>20.0</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>picture</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;https://via.placeholder.com/32.png&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>manufacturer</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Federation Imports&quot;</span><span class=w></span>
<span class=w>      </span><span class=p>},</span><span class=w></span>
<span class=w>      </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;3&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Tooth sharpener&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>stock</span><span class=o>:</span><span class=w> </span><span class=kt>30</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>unitPrice</span><span class=o>:</span><span class=w> </span><span class=kt>5.25</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>picture</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;https://via.placeholder.com/32.png&quot;</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>manufacturer</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;Farenginar Exploits&quot;</span><span class=w></span>
<span class=w>      </span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=p>];</span><span class=w></span>
<span class=w>  </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Add the mock service to the <code>index.ts</code> file in the services directory: <div class=highlight><span class=filename>src/services/index.ts</span><pre><span></span><code><span class=p>...</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-items-mock.service&#39;</span><span class=p>;</span><span class=w></span>
<span class=p>...</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Update the controller test to inject the service into the controller and to return the value from the service: <div class=highlight><span class=filename>test/controllers/stock-items.controller.spec.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Application</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;express&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>request</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;supertest&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Container</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typescript-ioc&#39;</span><span class=p>;</span><span class=w></span>

<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>buildApiServer</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../helper&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>Mock</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>jest</span><span class=p>.</span><span class=nx>Mock</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemsMockService</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../../src/services&#39;</span><span class=p>;</span><span class=w></span>

<span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;stock-item.controller&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>

<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>app</span><span class=o>:</span><span class=w> </span><span class=kt>Application</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=nx>service_listStockItems</span><span class=o>:</span><span class=w> </span><span class=kt>Mock</span><span class=p>;</span><span class=w></span>

<span class=w>    </span><span class=nx>beforeEach</span><span class=p>(</span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nx>service_listStockItems</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>jest</span><span class=p>.</span><span class=nx>fn</span><span class=p>();</span><span class=w></span>
<span class=w>        </span><span class=nx>Container</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=nx>StockItemsMockService</span><span class=p>).</span><span class=nx>factory</span><span class=p>(</span><span class=w></span>
<span class=w>            </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>({</span><span class=w></span>
<span class=w>                </span><span class=nx>listStockItems</span><span class=o>:</span><span class=w> </span><span class=kt>service_listStockItems</span><span class=w></span>
<span class=w>            </span><span class=p>}),</span><span class=w></span>
<span class=w>        </span><span class=p>);</span><span class=w></span>

<span class=w>        </span><span class=kd>const</span><span class=w> </span><span class=nx>apiServer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>buildApiServer</span><span class=p>();</span><span class=w></span>

<span class=w>        </span><span class=nx>app</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>apiServer</span><span class=p>.</span><span class=nx>getApp</span><span class=p>();</span><span class=w></span>
<span class=w>    </span><span class=p>});</span><span class=w></span>


<span class=w>    </span><span class=nx>test</span><span class=p>(</span><span class=s1>&#39;canary verifies test infrastructure&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nx>expect</span><span class=p>(</span><span class=kc>true</span><span class=p>).</span><span class=nx>toEqual</span><span class=p>(</span><span class=kc>true</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=p>});</span><span class=w></span>

<span class=w>    </span><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;given GET /stock-items&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;when service is successful&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>expectedResult</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[{</span><span class=w> </span><span class=nx>value</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;val&#39;</span><span class=w> </span><span class=p>}];</span><span class=w></span>
<span class=w>            </span><span class=nx>beforeEach</span><span class=p>(()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=nx>service_listStockItems</span><span class=p>.</span><span class=nx>mockResolvedValue</span><span class=p>(</span><span class=nx>expectedResult</span><span class=p>);</span><span class=w></span>
<span class=w>            </span><span class=p>});</span><span class=w></span>

<span class=w>            </span><span class=nx>test</span><span class=p>(</span><span class=s1>&#39;then return 200 status&#39;</span><span class=p>,</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>request</span><span class=p>(</span><span class=nx>app</span><span class=p>).</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/stock-items&#39;</span><span class=p>).</span><span class=nx>expect</span><span class=p>(</span><span class=mf>200</span><span class=p>);</span><span class=w></span>
<span class=w>            </span><span class=p>});</span><span class=w></span>

<span class=w>            </span><span class=nx>test</span><span class=p>(</span><span class=s1>&#39;then should return value from service&#39;</span><span class=p>,</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>request</span><span class=p>(</span><span class=nx>app</span><span class=p>).</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/stock-items&#39;</span><span class=p>).</span><span class=nx>expect</span><span class=p>(</span><span class=nx>expectedResult</span><span class=p>);</span><span class=w></span>
<span class=w>            </span><span class=p>});</span><span class=w></span>
<span class=w>        </span><span class=p>});</span><span class=w></span>

<span class=w>        </span><span class=nx>describe</span><span class=p>(</span><span class=s1>&#39;when service fails&#39;</span><span class=p>,</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nx>beforeEach</span><span class=p>(()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=nx>service_listStockItems</span><span class=p>.</span><span class=nx>mockRejectedValue</span><span class=p>(</span><span class=ow>new</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s1>&#39;service failed&#39;</span><span class=p>));</span><span class=w></span>
<span class=w>            </span><span class=p>});</span><span class=w></span>

<span class=w>            </span><span class=nx>test</span><span class=p>(</span><span class=s1>&#39;then return 502 error&#39;</span><span class=p>,</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                </span><span class=k>return</span><span class=w> </span><span class=nx>request</span><span class=p>(</span><span class=nx>app</span><span class=p>).</span><span class=nx>get</span><span class=p>(</span><span class=s1>&#39;/stock-items&#39;</span><span class=p>).</span><span class=nx>expect</span><span class=p>(</span><span class=mf>502</span><span class=p>);</span><span class=w></span>
<span class=w>            </span><span class=p>});</span><span class=w></span>
<span class=w>        </span><span class=p>});</span><span class=w></span>
<span class=w>    </span><span class=p>});</span><span class=w></span>
<span class=p>});</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Update the controller to inject the service and use it: <div class=highlight><span class=filename>src/controllers/stock-items.controller.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Inject</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typescript-ioc&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>GET</span><span class=p>,</span><span class=w> </span><span class=nx>Path</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typescript-rest&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>HttpError</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typescript-rest/dist/server/model/errors&#39;</span><span class=p>;</span><span class=w></span>

<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemModel</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../models&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemsMockService</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../services&#39;</span><span class=p>;</span><span class=w></span>

<span class=kd>class</span><span class=w> </span><span class=nx>BadGateway</span><span class=w> </span><span class=k>extends</span><span class=w> </span><span class=nx>HttpError</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=kr>constructor</span><span class=p>(</span><span class=nx>message?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>super</span><span class=p>(</span><span class=s2>&quot;BadGateway&quot;</span><span class=p>,</span><span class=w> </span><span class=nx>message</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=nx>statusCode</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>502</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=kd>@Path</span><span class=p>(</span><span class=s1>&#39;stock-items&#39;</span><span class=p>)</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>StockItemsController</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=kd>@Inject</span><span class=w></span>
<span class=w>  </span><span class=nx>service</span><span class=o>:</span><span class=w> </span><span class=kt>StockItemsMockService</span><span class=p>;</span><span class=w></span>

<span class=w>  </span><span class=kd>@GET</span><span class=w></span>
<span class=w>  </span><span class=k>async</span><span class=w> </span><span class=nx>listStockItems</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>StockItemModel</span><span class=p>[]</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>      </span><span class=k>return</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>service</span><span class=p>.</span><span class=nx>listStockItems</span><span class=p>();</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>err</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>      </span><span class=k>throw</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nx>BadGateway</span><span class=p>(</span><span class=s1>&#39;There was an error&#39;</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=w>  </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Start the service <div class=highlight><pre><span></span><code>npm start
</code></pre></div></p> </li> <li> <p>Access the running service. This service runs on port <code>3000</code>:</p> </li> </ul> <div class="tabbed-set tabbed-alternate" data-tabs=4:2><input checked=checked id=__tabbed_4_1 name=__tabbed_4 type=radio><input id=__tabbed_4_2 name=__tabbed_4 type=radio><div class=tabbed-labels><label for=__tabbed_4_1>Gitpod</label><label for=__tabbed_4_2>Desktop/Laptop</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li>Once you run the application, Gitpod gives the option to make the port <strong>Public</strong>, in the bottom-right corner.Once you make the port Public, it gives you the option to <strong>Open Preview</strong> or <strong>Open Browser</strong>.</li> </ul> </div> <div class=tabbed-block> <ul> <li> <p>Open a browser to <code>http://localhost:3000/api-docs</code> to see the swagger page</p> </li> <li> <p>Expand our service from the list, click <code>Try it out</code>, then click <code>Execute</code></p> </li> </ul> </div> </div> </div> <ul> <li> <p>Push the changes we've made to the repository: <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s2>&quot;Adds a mock service implementation&quot;</span>
git push
</code></pre></div></p> </li> <li> <p>On the openshift console, open the <a href=/developer-intermediate/deploy-app/#6-view-your-application-pipeline>pipeline to see it running</a>.</p> </li> </ul> <h2 id=add-a-graphql-implementation-of-stock-items>Add a GraphQL implementation of Stock Items<a class=headerlink href=#add-a-graphql-implementation-of-stock-items title="Permanent link">&para;</a></h2> <p>The GraphQL template supports both REST and GraphQL APIs for accessing backend services. We have created a REST controller to expose the results from the service and now we will do the same for GraphQL.</p> <ul> <li> <p>Create a <code>stock-items</code> GraphQL schema in the <code>schemas</code> directory: <div class=highlight><span class=filename>src/schemas/stock-item.schema.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Field</span><span class=p>,</span><span class=w> </span><span class=nx>Float</span><span class=p>,</span><span class=w> </span><span class=nx>Int</span><span class=p>,</span><span class=w> </span><span class=nx>ObjectType</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;type-graphql&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemModel</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../models&#39;</span><span class=p>;</span><span class=w></span>

<span class=kd>@ObjectType</span><span class=p>()</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>StockItem</span><span class=w> </span><span class=k>implements</span><span class=w> </span><span class=nx>StockItemModel</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>@Field</span><span class=p>()</span><span class=w></span>
<span class=w>    </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=kd>@Field</span><span class=p>()</span><span class=w></span>
<span class=w>    </span><span class=nx>manufacturer</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=kd>@Field</span><span class=p>()</span><span class=w></span>
<span class=w>    </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=kd>@Field</span><span class=p>({</span><span class=w> </span><span class=nx>nullable</span><span class=o>:</span><span class=w> </span><span class=kt>true</span><span class=w> </span><span class=p>})</span><span class=w></span>
<span class=w>    </span><span class=nx>picture</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=kd>@Field</span><span class=p>(</span><span class=kr>type</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>Int</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=nx>stock</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=kd>@Field</span><span class=p>(</span><span class=kr>type</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>Float</span><span class=p>)</span><span class=w></span>
<span class=w>    </span><span class=nx>unitPrice</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Add the stock-items schema to the <code>index.ts</code> in the schemas directory: <div class=highlight><span class=filename>src/schemas/index.ts</span><pre><span></span><code><span class=p>...</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-item.schema&#39;</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Add a <code>stock-item</code> GraphQL resolver in the <code>resolvers</code> directory: <div class=highlight><span class=filename>src/resolvers/stock-item.resolver.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Query</span><span class=p>,</span><span class=w> </span><span class=nx>Resolver</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;type-graphql&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Inject</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typescript-ioc&#39;</span><span class=p>;</span><span class=w></span>

<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>resolverManager</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./_resolver-manager&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItem</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../schemas&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemModel</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../models&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemsMockService</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../services&#39;</span><span class=p>;</span><span class=w></span>

<span class=kd>@Resolver</span><span class=p>(</span><span class=k>of</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>StockItem</span><span class=p>)</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>StockItemResolver</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>@Inject</span><span class=w></span>
<span class=w>    </span><span class=nx>service</span><span class=o>:</span><span class=w> </span><span class=kt>StockItemsMockService</span><span class=p>;</span><span class=w></span>

<span class=w>    </span><span class=kd>@Query</span><span class=p>(</span><span class=nx>returns</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>[</span><span class=nx>StockItem</span><span class=p>])</span><span class=w></span>
<span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>stockItems</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>StockItemModel</span><span class=p>[]</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>service</span><span class=p>.</span><span class=nx>listStockItems</span><span class=p>();</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=nx>resolverManager</span><span class=p>.</span><span class=nx>registerResolver</span><span class=p>(</span><span class=nx>StockItemResolver</span><span class=p>);</span><span class=w></span>
</code></pre></div></p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The template includes a <code>resolverManager</code> component that simplifies the steps to make the resolver available. All that is required to use the resolver is to register it, preferably at the bottom of the module where it is defined.</p> </div> </li> <li> <p>Add the stock-items resolver to <code>index.ts</code> in the resolvers directory: <div class=highlight><span class=filename>src/resolvers/index.ts</span><pre><span></span><code><span class=p>...</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-item.resolver&#39;</span><span class=p>;</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Start the service: <div class=highlight><pre><span></span><code>npm start
</code></pre></div></p> </li> <li>Verify that the that the resolver is available using the Graph QL browser provided by the template:</li> </ul> <div class="tabbed-set tabbed-alternate" data-tabs=5:2><input checked=checked id=__tabbed_5_1 name=__tabbed_5 type=radio><input id=__tabbed_5_2 name=__tabbed_5 type=radio><div class=tabbed-labels><label for=__tabbed_5_1>Gitpod</label><label for=__tabbed_5_2>Desktop/Laptop</label></div> <div class=tabbed-content> <div class=tabbed-block> <ul> <li>Once you run the application, Gitpod gives the option to make the port <strong>Public</strong>, in the bottom-right corner.Once you make the port Public, it gives you the option to <strong>Open Preview</strong> or <strong>Open Browser</strong>.</li> </ul> </div> <div class=tabbed-block> <ul> <li>In your Browser, open GraphQL playground: <code>http://localhost:3000/graphql</code></li> <li>Run the query <code>query { stockItems { name } }</code></li> </ul> </div> </div> </div> <ul> <li> <p>Push the changes we've made to the repository: <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s2>&quot;Adds a graphql interface&quot;</span>
git push
</code></pre></div></p> </li> <li> <p>On the openshift console, open the <a href=/developer-intermediate/deploy-app/#6-view-your-application-pipeline>pipeline to see it running</a>.</p> </li> </ul> <h2 id=create-a-service-implementation-that-calls-the-microservice>Create a service implementation that calls the microservice<a class=headerlink href=#create-a-service-implementation-that-calls-the-microservice title="Permanent link">&para;</a></h2> <ul> <li> <p>Add a <code>stock-item-service.config</code> file in the <code>src/config</code> directory: <div class=highlight><span class=filename>src/config/stock-item-service.config.ts</span><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>StockItemServiceConfig</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>baseUrl</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Add a <code>stock-item-service.config.provider</code> file in the <code>src/config</code> directory: <div class=highlight><span class=filename>src/config/stock-item-service.config.provider.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=nx>ObjectFactory</span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typescript-ioc&#39;</span><span class=p>;</span><span class=w></span>

<span class=kd>const</span><span class=w> </span><span class=nx>baseUrl</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>SERVICE_URL</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=s1>&#39;localhost:9080&#39;</span><span class=p>;</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>stockItemConfigFactory</span><span class=o>:</span><span class=w> </span><span class=kt>ObjectFactory</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>({</span><span class=w></span>
<span class=w>  </span><span class=nx>baseUrl</span><span class=p>,</span><span class=w></span>
<span class=p>});</span><span class=w></span>
</code></pre></div></p> </li> </ul> <p>The config class separates how the config is loaded from how it is used. In this case the config is simply retrieved from an environment variable but in more complex cases the value(s) can be retrieved from external data sources.</p> <ul> <li> <p>Add the <code>stock-item-service.config</code> to an <code>index.ts</code> file of the <code>config</code> directory: <div class=highlight><span class=filename>src/config/index.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemServiceConfig</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-item-service.config&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>stockItemConfigFactory</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-item-service.config.provider&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Container</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typescript-ioc&#39;</span><span class=p>;</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-item-service.config&#39;</span><span class=p>;</span><span class=w></span>

<span class=nx>Container</span><span class=p>.</span><span class=nx>bind</span><span class=p>(</span><span class=nx>StockItemServiceConfig</span><span class=p>).</span><span class=nx>factory</span><span class=p>(</span><span class=nx>stockItemConfigFactory</span><span class=p>);</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Create a <code>stock-items</code> service in the services directory that uses the config: <div class=highlight><span class=filename>src/services/stock-items.service.ts</span><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Inject</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;typescript-ioc&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>get</span><span class=p>,</span><span class=w> </span><span class=nx>Response</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;superagent&#39;</span><span class=p>;</span><span class=w></span>

<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemsApi</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-items.api&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemModel</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../models&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>StockItemServiceConfig</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../config&#39;</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>LoggerApi</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;../logger&#39;</span><span class=p>;</span><span class=w></span>

<span class=kd>class</span><span class=w> </span><span class=nx>StockItem</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=s1>&#39;id&#39;</span><span class=nx>?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=s1>&#39;manufacturer&#39;</span><span class=nx>?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=s1>&#39;picture&#39;</span><span class=nx>?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=s1>&#39;name&#39;</span><span class=nx>?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=s1>&#39;price&#39;</span><span class=nx>?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=s1>&#39;stock&#39;</span><span class=nx>?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=kd>class</span><span class=w> </span><span class=nx>StockItemsService</span><span class=w> </span><span class=k>implements</span><span class=w> </span><span class=nx>StockItemsApi</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>@Inject</span><span class=w></span>
<span class=w>    </span><span class=nx>_logger</span><span class=o>:</span><span class=w> </span><span class=kt>LoggerApi</span><span class=p>;</span><span class=w></span>
<span class=w>    </span><span class=kd>@Inject</span><span class=w></span>
<span class=w>    </span><span class=nx>config</span><span class=o>:</span><span class=w> </span><span class=kt>StockItemServiceConfig</span><span class=p>;</span><span class=w></span>

<span class=w>    </span><span class=nx>get</span><span class=w> </span><span class=nx>logger</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nx>LoggerApi</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>_logger</span><span class=p>.</span><span class=nx>child</span><span class=p>(</span><span class=s1>&#39;StockItemsService&#39;</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=k>async</span><span class=w> </span><span class=nx>listStockItems</span><span class=p>()</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>StockItemModel</span><span class=p>[]</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span><span class=w> </span><span class=nx>reject</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nx>get</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>config</span><span class=p>.</span><span class=nx>baseUrl</span><span class=si>}</span><span class=sb>/stock-items`</span><span class=p>)</span><span class=w></span>
<span class=w>                </span><span class=p>.</span><span class=nx>set</span><span class=p>(</span><span class=s1>&#39;Accept&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;application/json&#39;</span><span class=p>)</span><span class=w></span>
<span class=w>                </span><span class=p>.</span><span class=nx>then</span><span class=p>(</span><span class=nx>res</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=nx>resolve</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>mapStockItems</span><span class=p>(</span><span class=nx>res</span><span class=p>.</span><span class=nx>body</span><span class=p>));</span><span class=w></span>
<span class=w>                </span><span class=p>})</span><span class=w></span>
<span class=w>                </span><span class=p>.</span><span class=k>catch</span><span class=p>(</span><span class=nx>err</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>                    </span><span class=nx>reject</span><span class=p>(</span><span class=nx>err</span><span class=p>);</span><span class=w></span>
<span class=w>                </span><span class=p>});</span><span class=w></span>
<span class=w>        </span><span class=p>});</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=nx>mapStockItems</span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>StockItem</span><span class=p>[])</span><span class=o>:</span><span class=w> </span><span class=nx>StockItemModel</span><span class=p>[]</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nx>data</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>mapStockItem</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=nx>mapStockItem</span><span class=p>(</span><span class=nx>item</span><span class=o>:</span><span class=w> </span><span class=kt>StockItem</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nx>StockItemModel</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=k>return</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>            </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>item.id</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>item.name</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nx>stock</span><span class=o>:</span><span class=w> </span><span class=kt>item.stock</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nx>unitPrice</span><span class=o>:</span><span class=w> </span><span class=kt>item.price</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nx>picture</span><span class=o>:</span><span class=w> </span><span class=kt>item.picture</span><span class=w> </span><span class=o>??</span><span class=w> </span><span class=s1>&#39;https://via.placeholder.com/32.png&#39;</span><span class=p>,</span><span class=w></span>
<span class=w>            </span><span class=nx>manufacturer</span><span class=o>:</span><span class=w> </span><span class=kt>item.manufacturer</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=p>};</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Add <code>stock-item.service</code> to <code>index.ts</code> in the <code>services</code> directory: <div class=highlight><span class=filename>src/services/index.ts</span><pre><span></span><code><span class=p>...</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;./stock-items.service&#39;</span><span class=p>;</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Replace <code>StockItemsMockService</code> with <code>StockItemsService</code> in the following files:</p> </li> <li><code>src/resolvers/stock-item.resolver.ts</code></li> <li><code>src/controllers/stock-items.controller.ts</code></li> <li> <p><code>test/controllers/stock-items.controller.spec.ts</code></p> </li> <li> <p>Modify <code>connectsTo</code> property to the values.yaml file of the Helm chart. The value of the property should match the Kubernetes service of the microservice. (For template projects, the service name is the same as the name of the application which is that same as the name of the repository.) <div class=highlight><span class=filename>chart/base/values.yaml</span><pre><span></span><code><span class=nn>...</span><span class=w></span>

<span class=nt>connectsTo</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">inv-svc-{your initials}</span><span class=w></span>

<span class=nn>...</span><span class=w></span>
</code></pre></div></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>The <code>values.yaml</code> file of the Helm chart defines the variables that can be provided to the template as input. Now that we've added a new variable, we will need to update the appropriate template file to use our new variable.</p> </div> </li> <li> <p>Add a new environment variable named <code>SERVICE_URL</code> to the list of existing environment variables in deployment.yaml. (<code>SERVICE_URL</code> is the name we gave the environment variable in our <code>stock-item-service.config</code> class as the first step in this section.) The value of this environment variable should come from the <code>connectsTo</code> value we defined. You can add <code>| quote</code> to wrap the value in quotes in case the value is not formatted correctly: <div class=highlight><span class=filename>chart/base/templates/deployment.yaml</span><pre><span></span><code><span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class=w></span>
<span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">env</span><span class="p p-Indicator">:</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">INGRESS_HOST</span><span class=w></span>
<span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PROTOCOLS</span><span class=w></span>
<span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LOG_LEVEL</span><span class=w></span>
<span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.logLevel | quote</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">SERVICE_URL</span><span class=w></span>
<span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>printf &quot;%s</span><span class="p p-Indicator">:</span><span class=nv>80&quot; .Values.connectsTo | quote</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<span class=w>  </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class=w></span>
</code></pre></div></p> <div class="admonition info"> <p class=admonition-title>Info</p> <p><code>deployment.yaml</code> is a templatized Kubernetes yaml file that describes the deployment of our component. The deployment will create one or more pods based on the pod template defined in the deployment. Each pod that starts will have the environment variables that we have defined in the <code>env</code> section available for the container image to reference.</p> </div> </li> <li> <p>Commit and push the changes to git: <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s2>&quot;Adds service implementation&quot;</span>
git push
</code></pre></div></p> </li> <li> <p>On the openshift console, open the <a href=/developer-intermediate/deploy-app/#6-view-your-application-pipeline>pipeline to see it running</a>.</p> </li> </ul> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! </div> </div> </div> </fieldset> </form> </article> </div> </div> </main> <!-- Footer --> <footer class=md-footer> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text><a href=https://develop.cloudnativetoolkit.dev/contribute/contribute/ >Contribute</a> to the Cloud-Native Toolkit</div> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <div class=md-footer-text>Have questions? open an issue on <a href=https://github.com/cloud-native-toolkit/planning/issues/new/choose>GitHub</a>.</div> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright  2022 IBM </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.tracking"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.9c69f0bc.min.js></script> <script src=../../javascripts/extra.js></script> </body> </html>