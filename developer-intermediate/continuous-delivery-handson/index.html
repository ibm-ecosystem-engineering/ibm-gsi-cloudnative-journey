<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Lab for continuous delivery using ArgoCD"><meta name=author content="Ecosystem Engineering"><link href=https://ibm-ecosystem-lab.github.io/developer-intermediate/continuous-delivery-handson/ rel=canonical><link rel=icon href=../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.2.1, mkdocs-material-7.1.8"><title>ArgoCD Lab - TechZone Automation - Cloud-Native Learning Journey</title><link rel=stylesheet href=../../assets/stylesheets/main.ca7ac06f.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.f1a3b89f.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,400i,700%7CIBM+Plex+Mono&display=fallback"><style>:root{--md-text-font-family:"IBM Plex Sans";--md-code-font-family:"IBM Plex Mono"}</style><link rel=stylesheet href=../../css/extra.css><link rel=stylesheet href=../../css/toolkit-code.css><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-155887541-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script><script async src=https://www.google-analytics.com/analytics.js></script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="TechZone Automation - Cloud-Native Learning Journey - ArgoCD Lab"><meta property=og:description content="This Learning Journey enables cloud operators and developers to deliver cloud-native solutions with Red Hat OpenShift in hybrid cloud environments."><meta content=https://ibm-ecosystem-lab.github.io/developer-intermediate/continuous-delivery-handson/ property=og:url><meta property=og:image content=https://ibm-ecosystem-lab.github.io/assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#pre-requisites class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="TechZone Automation - Cloud-Native Learning Journey" class="md-header__button md-logo" aria-label="TechZone Automation - Cloud-Native Learning Journey" data-md-component=logo> <img src=../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TechZone Automation - Cloud-Native Learning Journey </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> ArgoCD Lab </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ibm-ecosystem-lab/ibm-gsi-cloudnative-journey/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../.."
      title="TechZone Automation - Cloud-Native Learning Journey"
      class="md-nav__button md-logo"
      aria-label="TechZone Automation - Cloud-Native Learning Journey"
      data-md-component="logo"
    >
      
  <img src="../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    TechZone Automation - Cloud-Native Learning Journey
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.com/ibm-ecosystem-lab/ibm-gsi-cloudnative-journey/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Introduction <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Introduction data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Introduction </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/introduction/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../getting-started/prereqs/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../getting-started/checksetup/ class=md-nav__link> Validate Environment </a> </li> <li class=md-nav__item> <a href=../../getting-started/devenvsetup/ class=md-nav__link> Developer Tools Setup </a> </li> <li class=md-nav__item> <a href=../../getting-started/cli/ class=md-nav__link> Developer Tools CLI </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Developer Foundation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Foundation" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Developer Foundation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-foundation/agenda/ class=md-nav__link> Agenda </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/cloud-native-overview/ class=md-nav__link> What is Cloud-Native? </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/cloud-native-app-dev/ class=md-nav__link> Cloud-Native App Dev </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/containers/ class=md-nav__link> Containers Overview </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-overview/ class=md-nav__link> Kubernetes 'overview' </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/openshift/ class=md-nav__link> Openshift 'overview' </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-core-concepts/ class=md-nav__link> Core Concepts </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-multi-container-pods/ class=md-nav__link> Multi-Container Pods </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-observability/k8s-observability/ class=md-nav__link> Observability </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-pod-design/ class=md-nav__link> Pod Design </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-services-networking/ class=md-nav__link> Services & Networking </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-state-persistence/ class=md-nav__link> State Persistence </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-troubleshooting/ class=md-nav__link> Troubleshoot </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/garage-development/ class=md-nav__link> Garage Method </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Developer Intermediate <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Intermediate" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Developer Intermediate </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../agenda/ class=md-nav__link> Agenda </a> </li> <li class=md-nav__item> <a href=../deploy-app/ class=md-nav__link> Deploy First App </a> </li> <li class=md-nav__item> <a href=../artifact-management/ class=md-nav__link> Artifact Management </a> </li> <li class=md-nav__item> <a href=../code-analysis/ class=md-nav__link> Code Analysis </a> </li> <li class=md-nav__item> <a href=../continuous-delivery/ class=md-nav__link> Continuous Delivery </a> </li> <li class=md-nav__item> <a href=../content-overview/ class=md-nav__link> DevSecOps Overview </a> </li> <li class=md-nav__item> <a href=../continuous-integration/ class=md-nav__link> Continuous Integration </a> </li> <li class=md-nav__item> <a href=../image-registry/ class=md-nav__link> Image Registry </a> </li> <li class=md-nav__item> <a href=../log-management/ class=md-nav__link> Log Management </a> </li> <li class=md-nav__item> <a href=../monitoring/ class=md-nav__link> Monitoring </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_11 type=checkbox id=__nav_3_11> <label class=md-nav__link for=__nav_3_11> Inventory App <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Inventory App" data-md-level=2> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> Inventory App </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../inventory-application/ class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../inventory-prebuilt-solution/ class=md-nav__link> Solution </a> </li> <li class=md-nav__item> <a href=../inventory-service/ class=md-nav__link> Service </a> </li> <li class=md-nav__item> <a href=../inventory-bff/ class=md-nav__link> BFF </a> </li> <li class=md-nav__item> <a href=../inventory-ui/ class=md-nav__link> UI </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Developer Advanced <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Advanced" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Developer Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-advanced-1/inventory-cd/ class=md-nav__link> CD for Inventory App </a> </li> <li class=md-nav__item> <a href=../../developer-advanced-1/database-with-cloudant/ class=md-nav__link> Database with Cloudant </a> </li> <li class=md-nav__item> <a href=../../developer-advanced-1/database-with-mongodb/ class=md-nav__link> Database with MongoDB </a> </li> <li class=md-nav__item> <a href=../../developer-advanced-1/inventory-appid/ class=md-nav__link> Authentication with AppID </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#pre-requisites class=md-nav__link> Pre-requisites </a> </li> <li class=md-nav__item> <a href=#argocd-installation class=md-nav__link> ArgoCD Installation </a> </li> <li class=md-nav__item> <a href=#deploying-the-app class=md-nav__link> Deploying the app </a> </li> <li class=md-nav__item> <a href=#pre-requisites_1 class=md-nav__link> Pre-requisites </a> </li> <li class=md-nav__item> <a href=#argocd-installation_1 class=md-nav__link> ArgoCD Installation </a> </li> <li class=md-nav__item> <a href=#deploying-the-app_1 class=md-nav__link> Deploying the app </a> </li> <li class=md-nav__item> <a href=#verifying-the-deployment class=md-nav__link> Verifying the deployment </a> </li> <li class=md-nav__item> <a href=#using-the-argocd-cli class=md-nav__link> Using the ArgoCD CLI </a> </li> <li class=md-nav__item> <a href=#references class=md-nav__link> References </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ibm-ecosystem-lab/ibm-gsi-cloudnative-journey/edit/main/docs/developer-intermediate/continuous-delivery-handson.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>ArgoCD Lab</h1> <!--- cSpell:ignore ICPA openshiftconsole Theia userid toolset crwexposeservice gradlew bluemix ocinstall Mico crwopenlink crwopenapp swaggerui gitpat gituser  buildconfig yourproject wireframe devenvsetup viewapp crwopenlink  atemplatized rtifactoryurlsetup Kata Koda configmap Katacoda checksetup cndp katacoda checksetup Linespace igccli regcred REPLACEME Tavis pipelinerun openshiftcluster invokecloudshell cloudnative sampleapp bwoolf hotspots multicloud pipelinerun Sricharan taskrun Vadapalli Rossel REPLACEME cloudnativesampleapp artifactoryuntar untar Hotspot devtoolsservices Piyum Zonooz Farr Kamal Arora Laszewski  Roadmap roadmap Istio Packt buildpacks automatable ksonnet jsonnet targetport podsiks SIGTERM SIGKILL minikube apiserver multitenant kubelet multizone Burstable checksetup handson  stockbffnode codepatterns devenvsetup newwindow preconfigured cloudantcredentials apikey Indexyaml classname  errorcondition tektonpipeline gradlew gitsecret viewapp cloudantgitpodscreen crwopenlink cdply crwopenapp --> <div class=tabbed-set data-tabs=1:1><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>OpenShift</label><div class=tabbed-content> <h2 id=pre-requisites>Pre-requisites<a class=headerlink href=#pre-requisites title="Permanent link">&para;</a></h2> <p>Make sure your environment is setup properly for the lab.</p> <p>Check the <a href=/getting-started/devenvsetup>Environment Setup</a> page for your setup.</p> <h2 id=argocd-installation>ArgoCD Installation<a class=headerlink href=#argocd-installation title="Permanent link">&para;</a></h2> <ul> <li>Create the namespace <code>argocd</code> to install argocd <div class=highlight><pre><span></span><code>oc new-project argocd
</code></pre></div></li> <li>Install ArgoCD as follows. <div class=highlight><pre><span></span><code>oc apply --filename https://raw.githubusercontent.com/ibm-cloud-architecture/learning-cloudnative-101/master/static/yamls/argo-lab/argocd-operator.yaml
</code></pre></div></li> <li>When installing the tutorial, make sure you wait until the argocd-operator is finished before installing the argocd-cr..or it will fail. You can do this: <div class=highlight><pre><span></span><code>oc get ClusterServiceVersion/argocd-operator-helm.v0.0.3 -n argocd
NAME                          DISPLAY                   VERSION   REPLACES                      PHASE
argocd-operator-helm.v0.0.3   Argo CD Operator <span class=o>(</span>Helm<span class=o>)</span>   <span class=m>0</span>.0.3     argocd-operator-helm.v0.0.2   Succeeded
</code></pre></div> and wait for the "succeeded" to come up before proceeding. <div class=highlight><pre><span></span><code>oc apply --filename https://raw.githubusercontent.com/ibm-cloud-architecture/learning-cloudnative-101/master/static/yamls/argo-lab/argocd-cr.yaml
</code></pre></div></li> <li>Install the <code>argocd</code> CLI, for example on OSX use brew <div class=highlight><pre><span></span><code>brew tap argoproj/tap
brew install argoproj/tap/argocd
</code></pre></div></li> <li>Set an environment variable <code>ARGOCD_URL</code> using the <code>EXTERNAL-IP</code> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>ARGOCD_SERVER</span><span class=o>=</span><span class=s2>&quot;</span><span class=k>$(</span>oc get route argocd-server -n argocd -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.status.ingress[0].host}&#39;</span><span class=k>)</span><span class=s2>&quot;</span>
<span class=nb>export</span> <span class=nv>ARGOCD_URL</span><span class=o>=</span><span class=s2>&quot;https://</span><span class=nv>$ARGOCD_SERVER</span><span class=s2>&quot;</span>
<span class=nb>echo</span> <span class=nv>ARGOCD_URL</span><span class=o>=</span><span class=nv>$ARGOCD_URL</span>
<span class=nb>echo</span> <span class=nv>ARGOCD_SERVER</span><span class=o>=</span><span class=nv>$ARGOCD_SERVER</span>
</code></pre></div></li> </ul> <h2 id=deploying-the-app>Deploying the app<a class=headerlink href=#deploying-the-app title="Permanent link">&para;</a></h2> <ul> <li>Login into the UI. <div class=highlight><pre><span></span><code>open <span class=nv>$ARGOCD_URL</span>
</code></pre></div></li> <li>Use <code>admin</code> as the username and get the password with the following command, it's the name of the pod for the argo-server <div class=highlight><pre><span></span><code>oc get pods -n argocd -l app.kubernetes.io/name<span class=o>=</span>argocd-server -o name <span class=p>|</span> cut -d<span class=s1>&#39;/&#39;</span> -f <span class=m>2</span>
</code></pre></div> For example the output is similar to this: <div class=highlight><pre><span></span><code>argocd-server-b54756f69-jncc9
</code></pre></div></li> </ul> <p><img alt="ArgoCD Login" src=./images/argocd_login.png></p> <ul> <li>Now go back to the ArgoCD home and click on <code>NEW APP</code>.</li> <li>Add the below details:</li> <li>Application Name: <code>sample</code></li> <li>Project - <code>default</code></li> <li>SYNC POLICY: <code>Manual</code></li> <li>REPO URL: <code>https://github.com/ibm-cloud-architecture/cloudnative_sample_app_deploy</code></li> <li>Revision: <code>HEAD</code></li> <li>Path: <code>openshift</code></li> </ul> <p><img alt="app details one" src=./images/app_argo_1.png></p> <ul> <li>Cluster - Select the default one <code>https://kubernetes.default.svc</code> to deploy in-cluster</li> <li>Namespace - <code>default</code></li> <li>Click Create to finish</li> </ul> <p><img alt="app details two" src=./images/app_argo_2.png></p> <ul> <li>You will now see the available apps.</li> </ul> </div> </div> <p><img alt="sampleapp create" src=./images/sampleapp_create.png></p> <div class=highlight><pre><span></span><code>- Initially, the app will be out of sync. It is yet to be deployed. You need to sync it for deploying.

To sync the application, click `SYNC` and then `SYNCHRONIZE`.

![out of sync](./images/out_of_sync.png)

- Wait till the app is deployed.

![synched app](./images/synched_app.png)

- Once the app is deployed, click on it to see the details.

![sample app deployed](./images/sample_app_deployed.png)

![sample app full deployment](./images/sample_app_full_deployment.png)

## Verifying the deployment

- Access the app to verify if it is correctly deployed.
- List the cloudnativesampleapp-service route
```
oc get route
```
It should have an IP under `EXTERNAL-IP` column
```
NAME                 HOST/PORT                                     PATH   SERVICES                       PORT   TERMINATION   WILDCARD
cloudnative-sample   cloudnative-sample-default.apps-crc.testing          cloudnativesampleapp-service   9080                 None
```
- Set an environment variable `APP_URL` using the `EXTERNAL-IP`
```
export APP_URL=&quot;http://$(oc get route cloudnative-sample -o jsonpath=&#39;{.status.ingress[0].host}&#39;)&quot;
echo ARGOCD_SERVER=$APP_URL
```
- Access the url using `curl`
```
curl &quot;$APP_URL/greeting?name=Carlos&quot;
```
```
{&quot;id&quot;:2,&quot;content&quot;:&quot;Welcome to Cloudnative bootcamp !!! Hello, Carlos :)&quot;}
```

## Using the ArgoCD CLI

- Login using the cli.
- Login as the `admin` user.
- The initial password is autogenerated to be the pod name of the Argo CD API server. This can be retrieved with the following command.
```bash
oc get pods -n argocd -l app.kubernetes.io/name=argocd-server -o name | cut -d&#39;/&#39; -f 2
```
- Now login as follows.
```bash
argocd login $ARGOCD_SERVER
```

```
WARNING: server certificate had error: x509: cannot validate certificate for 10.97.240.99 because it doesn&#39;t contain 
any IP SANs. Proceed insecurely (y/n)? y
Username: admin
Password: 
&#39;admin&#39; logged in successfully
Context &#39;10.97.240.99&#39; updated
```
- List the applications
```bash
argocd app list
```
```
NAME    CLUSTER                         NAMESPACE  PROJECT  STATUS  HEALTH   SYNCPOLICY  CONDITIONS  REPO                                                                     PATH   TARGET
sample  https://kubernetes.default.svc  default    default  Synced  Healthy  &lt;none&gt;      &lt;none&gt;      https://github.com/ibm-cloud-architecture/cloudnative_sample_app_deploy  openshift  HEAD
```
- Get application details
```bash
argocd app get sample
```
```
Name:               sample
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://10.97.240.99/applications/sample
Repo:               https://github.com/ibm-cloud-architecture/cloudnative_sample_app_deploy
Target:             HEAD
Path:               openshift
SyncWindow:         Sync Allowed
Sync Policy:        &lt;none&gt;
Sync Status:        Synced to HEAD (9684037)
Health Status:      Healthy

GROUP  KIND        NAMESPACE  NAME                             STATUS  HEALTH   HOOK  MESSAGE
    Service     default    cloudnativesampleapp-service     Synced  Healthy        service/cloudnativesampleapp-service created
apps   Deployment  default    cloudnativesampleapp-deployment  Synced  Healthy        deployment.apps/cloudnativesampleapp-deployment created
```
- Show application deployment history
```bash
argocd app history sample
```
```
ID  DATE                           REVISION
0   2020-02-12 21:10:32 -0500 EST  HEAD (9684037)
```
## References

- [ArgoCD](https://argoproj.github.io/argo-cd/)
</code></pre></div> <div class=tabbed-set data-tabs=2:1><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>IKS</label><div class=tabbed-content> <h2 id=pre-requisites_1>Pre-requisites<a class=headerlink href=#pre-requisites_1 title="Permanent link">&para;</a></h2> <p>Make sure your environment is setup properly for the lab.</p> <p>Check the <a href=/getting-started/devenvsetup>Environment Setup</a> page for your setup.</p> <h2 id=argocd-installation_1>ArgoCD Installation<a class=headerlink href=#argocd-installation_1 title="Permanent link">&para;</a></h2> <ul> <li>Create the namespace <code>argocd</code> to install argocd <div class=highlight><pre><span></span><code>kubectl create namespace argocd
</code></pre></div></li> <li>Install ArgoCD as follows. <div class=highlight><pre><span></span><code>kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
</code></pre></div></li> <li>Install the <code>argocd</code> CLI, for example on OSX use brew <div class=highlight><pre><span></span><code>brew tap argoproj/tap
brew install argoproj/tap/argocd
</code></pre></div></li> <li>To allow access via LoadBalancer and leverage the <code>minikube tunnel</code> running in the background, patch the argocd server service <div class=highlight><pre><span></span><code>kubectl patch svc argocd-server -n argocd -p <span class=s1>&#39;{&quot;spec&quot;: {&quot;type&quot;: &quot;LoadBalancer&quot;}}&#39;</span>
</code></pre></div></li> <li>List the argocd-server service <div class=highlight><pre><span></span><code>kubectl get svc argocd-server -n argocd
</code></pre></div> It should have an IP under <code>EXTERNAL-IP</code> column <div class=highlight><pre><span></span><code>NAME            TYPE           CLUSTER-IP     EXTERNAL-IP    PORT(S)                      AGE
argocd-server   LoadBalancer   10.97.240.99   10.97.240.99   80:30286/TCP,443:31716/TCP   41s
</code></pre></div></li> <li>Set an environment variable <code>ARGOCD_URL</code> using the <code>EXTERNAL-IP</code> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>ARGOCD_SERVER</span><span class=o>=</span><span class=s2>&quot;</span><span class=k>$(</span>kubectl get svc argocd-server -n argocd -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.status.loadBalancer.ingress[0].ip}&#39;</span><span class=k>)</span><span class=s2>&quot;</span>
<span class=nb>export</span> <span class=nv>ARGOCD_URL</span><span class=o>=</span><span class=s2>&quot;https://</span><span class=nv>$ARGOCD_SERVER</span><span class=s2>&quot;</span>
<span class=nb>echo</span> <span class=nv>ARGOCD_URL</span><span class=o>=</span><span class=nv>$ARGOCD_URL</span>
<span class=nb>echo</span> <span class=nv>ARGOCD_SERVER</span><span class=o>=</span><span class=nv>$ARGOCD_SERVER</span>
</code></pre></div></li> </ul> <h2 id=deploying-the-app_1>Deploying the app<a class=headerlink href=#deploying-the-app_1 title="Permanent link">&para;</a></h2> <ul> <li>Login into the UI. <div class=highlight><pre><span></span><code>open <span class=nv>$ARGOCD_URL</span>
</code></pre></div></li> <li>Use <code>admin</code> as the username and get the password with the following command, it's the name of the pod for the argo-server <div class=highlight><pre><span></span><code>kubectl get pods -n argocd -l app.kubernetes.io/name<span class=o>=</span>argocd-server -o name <span class=p>|</span> cut -d<span class=s1>&#39;/&#39;</span> -f <span class=m>2</span>
</code></pre></div> For example the output is similar to this: <div class=highlight><pre><span></span><code>argocd-server-b54756f69-jncc9
</code></pre></div></li> </ul> <p><img alt="ArgoCD Login" src=./images/argocd_login.png></p> <ul> <li>Now go back to the ArgoCD home and click on <code>NEW APP</code>.</li> <li>Add the below details:</li> <li>Application Name: <code>sample</code></li> <li>Project - <code>default</code></li> <li>SYNC POLICY: <code>Manual</code></li> <li>REPO URL: <code>https://github.com/ibm-cloud-architecture/cloudnative_sample_app_deploy</code></li> <li>Revision: <code>HEAD</code></li> <li>Path: <code>kubernetes</code></li> </ul> <p><img alt="app details one" src=./images/app_argo_1.png></p> <ul> <li>Cluster - Select the default one <code>https://kubernetes.default.svc</code> to deploy in-cluster</li> <li>Namespace - <code>default</code></li> <li>Click Create to finish</li> </ul> <p><img alt="app details two" src=./images/app_argo_2.png></p> <ul> <li>You will now see the available apps.</li> </ul> <p><img alt="sampleapp create" src=./images/sampleapp_create.png></p> <ul> <li>Initially, the app will be out of sync. It is yet to be deployed. You need to sync it for deploying.</li> </ul> <p>To sync the application, click <code>SYNC</code> and then <code>SYNCHRONIZE</code>.</p> <p><img alt="out of sync" src=./images/out_of_sync.png></p> <ul> <li>Wait till the app is deployed.</li> </ul> <p><img alt="synched app" src=./images/synched_app.png></p> <ul> <li>Once the app is deployed, click on it to see the details.</li> </ul> <p><img alt="sample app deployed" src=./images/sample_app_deployed.png></p> <p><img alt="sample app full deployment" src=./images/sample_app_full_deployment.png></p> <h2 id=verifying-the-deployment>Verifying the deployment<a class=headerlink href=#verifying-the-deployment title="Permanent link">&para;</a></h2> <ul> <li>Access the app to verify if it is correctly deployed.</li> <li>To allow access via LoadBalancer and leverage the <code>minikube tunnel</code> running in the background, patch the argocd server service <div class=highlight><pre><span></span><code>kubectl patch svc cloudnativesampleapp-service -p <span class=s1>&#39;{&quot;spec&quot;: {&quot;type&quot;: &quot;LoadBalancer&quot;}}&#39;</span>
</code></pre></div></li> <li>List the cloudnativesampleapp-service service <div class=highlight><pre><span></span><code>kubectl get svc cloudnativesampleapp-service
</code></pre></div> It should have an IP under <code>EXTERNAL-IP</code> column <div class=highlight><pre><span></span><code>NAME                           TYPE           CLUSTER-IP       EXTERNAL-IP      PORT(S)          AGE
cloudnativesampleapp-service   LoadBalancer   10.109.242.212   10.109.242.212   9080:31905/TCP   13m
</code></pre></div></li> <li>Set an environment variable <code>APP_URL</code> using the <code>EXTERNAL-IP</code> <div class=highlight><pre><span></span><code><span class=nb>export</span> <span class=nv>APP_URL</span><span class=o>=</span><span class=s2>&quot;http://</span><span class=k>$(</span>kubectl get svc cloudnativesampleapp-service -o <span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.status.loadBalancer.ingress[0].ip}&#39;</span><span class=k>)</span><span class=s2>:9080&quot;</span>
<span class=nb>echo</span> <span class=nv>ARGOCD_SERVER</span><span class=o>=</span><span class=nv>$APP_URL</span>
</code></pre></div></li> <li>Access the url using <code>curl</code> <div class=highlight><pre><span></span><code>curl <span class=s2>&quot;</span><span class=nv>$APP_URL</span><span class=s2>/greeting?name=Carlos&quot;</span>
</code></pre></div> <div class=highlight><pre><span></span><code>{&quot;id&quot;:2,&quot;content&quot;:&quot;Welcome to Cloudnative bootcamp !!! Hello, Carlos :)&quot;}
</code></pre></div></li> </ul> <h2 id=using-the-argocd-cli>Using the ArgoCD CLI<a class=headerlink href=#using-the-argocd-cli title="Permanent link">&para;</a></h2> <ul> <li>Login using the cli.</li> <li>Login as the <code>admin</code> user.</li> <li>The initial password is autogenerated to be the pod name of the Argo CD API server. This can be retrieved with the following command. <div class=highlight><pre><span></span><code>kubectl get pods -n argocd -l app.kubernetes.io/name<span class=o>=</span>argocd-server -o name <span class=p>|</span> cut -d<span class=s1>&#39;/&#39;</span> -f <span class=m>2</span>
</code></pre></div></li> <li>Now login as follows. <div class=highlight><pre><span></span><code>argocd login <span class=nv>$ARGOCD_SERVER</span>
</code></pre></div></li> </ul> <p><div class=highlight><pre><span></span><code>WARNING: server certificate had error: x509: cannot validate certificate for 10.97.240.99 because it doesn&#39;t contain 
any IP SANs. Proceed insecurely (y/n)? y
Username: admin
Password: 
&#39;admin&#39; logged in successfully
Context &#39;10.97.240.99&#39; updated
</code></pre></div> - List the applications <div class=highlight><pre><span></span><code>argocd app list
</code></pre></div> <div class=highlight><pre><span></span><code>NAME    CLUSTER                         NAMESPACE  PROJECT  STATUS  HEALTH   SYNCPOLICY  CONDITIONS  REPO                                                                     PATH   TARGET
sample  https://kubernetes.default.svc  default    default  Synced  Healthy  &lt;none&gt;      &lt;none&gt;      https://github.com/ibm-cloud-architecture/cloudnative_sample_app_deploy  kubernetes  HEAD
</code></pre></div> - Get application details <div class=highlight><pre><span></span><code>argocd app get sample
</code></pre></div> <div class=highlight><pre><span></span><code>Name:               sample
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://10.97.240.99/applications/sample
Repo:               https://github.com/ibm-cloud-architecture/cloudnative_sample_app_deploy
Target:             HEAD
Path:               kubernetes
SyncWindow:         Sync Allowed
Sync Policy:        &lt;none&gt;
Sync Status:        Synced to HEAD (9684037)
Health Status:      Healthy

GROUP  KIND        NAMESPACE  NAME                             STATUS  HEALTH   HOOK  MESSAGE
    Service     default    cloudnativesampleapp-service     Synced  Healthy        service/cloudnativesampleapp-service created
apps   Deployment  default    cloudnativesampleapp-deployment  Synced  Healthy        deployment.apps/cloudnativesampleapp-deployment created
</code></pre></div> - Show application deployment history <div class=highlight><pre><span></span><code>argocd app <span class=nb>history</span> sample
</code></pre></div> <div class=highlight><pre><span></span><code>ID  DATE                           REVISION
0   2020-02-12 21:10:32 -0500 EST  HEAD (9684037)
</code></pre></div></p> <h2 id=references>References<a class=headerlink href=#references title="Permanent link">&para;</a></h2> <ul> <li><a href=https://argoproj.github.io/argo-cd/ >ArgoCD</a></li> </ul> </div> </div> </article> </div> </div> </main> <!-- Footer --> <footer class=md-footer> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text><a href=https://develop.cloudnativetoolkit.dev/contribute/contribute/ >Contribute</a> to the Cloud-Native Toolkit</div> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <div class=md-footer-text>Have questions? open an issue on <a href=https://github.com/cloud-native-toolkit/planning/issues/new/choose>GitHub</a>.</div> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright Â© 2022 IBM </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.tracking"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script> <script src=../../assets/javascripts/bundle.76f349be.min.js></script> </body> </html>