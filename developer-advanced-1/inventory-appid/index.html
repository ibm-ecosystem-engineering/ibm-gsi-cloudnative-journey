<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This Learning Journey enables cloud operators and developers to deliver cloud-native solutions with Red Hat OpenShift in hybrid cloud environments."><meta name=author content="Ecosystem Engineering"><link href=https://learning-journey.cloudnativetoolkit.dev/developer-advanced-1/inventory-appid/ rel=canonical><link rel=icon href=../../images/cloudnativetoolkit.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.4.1"><title>Authentication with App ID - TechZone Automation - Cloud-Native Learning Journey</title><link rel=stylesheet href=../../assets/stylesheets/main.69437709.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cbb835fc.min.css><meta name=theme-color content=#000000><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style><link rel=stylesheet href=../../css/extra.css><link rel=stylesheet href=../../css/toolkit-code.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-155887541-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){if(document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document.forms.feedback){var e,a=document.forms.feedback;for(e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><!-- Determine title --><!-- The image needs to have an absolute URL --><!-- Open graph meta tags --><meta property=og:type content=website><meta property=og:title content="TechZone Automation - Cloud-Native Learning Journey - Authentication with AppID"><meta property=og:description content="This Learning Journey enables cloud operators and developers to deliver cloud-native solutions with Red Hat OpenShift in hybrid cloud environments."><meta content=https://learning-journey.cloudnativetoolkit.dev/developer-advanced-1/inventory-appid/ property=og:url><meta property=og:image content=https://learning-journey.cloudnativetoolkit.dev/assets/images/banner.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1080><meta property=og:image:height content=568></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#prerequisites class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="TechZone Automation - Cloud-Native Learning Journey" class="md-header__button md-logo" aria-label="TechZone Automation - Cloud-Native Learning Journey" data-md-component=logo> <img src=../../images/cloudnativetoolkit.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> TechZone Automation - Cloud-Native Learning Journey </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Authentication with App ID </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ibm-ecosystem-lab/ibm-gsi-cloudnative-journey title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <!-- Determine class according to configuration --> <!-- Main navigation --> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <!-- Site title --> <!--
  <label class="md-nav__title" for="__drawer">
    <a
      href="../.."
      title="TechZone Automation - Cloud-Native Learning Journey"
      class="md-nav__button md-logo"
      aria-label="TechZone Automation - Cloud-Native Learning Journey"
      data-md-component="logo"
    >
      
  <img src="../../images/cloudnativetoolkit.png" alt="logo">

    </a>
    TechZone Automation - Cloud-Native Learning Journey
  </label>
--> <!-- Repository information --> <div class=md-nav__source> <a href=https://github.com/ibm-ecosystem-lab/ibm-gsi-cloudnative-journey title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> </div> </a> </div> <!-- Render item list --> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_1 type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1> Introduction <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Introduction data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Introduction </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../getting-started/prereqs/ class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=../../getting-started/checksetup/ class=md-nav__link> Validate Environment </a> </li> <li class=md-nav__item> <a href=../../getting-started/devenvsetup/ class=md-nav__link> Developer Tools Setup </a> </li> <li class=md-nav__item> <a href=../../getting-started/cli/ class=md-nav__link> Developer Tools CLI </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Developer Foundation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Foundation" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Developer Foundation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-foundation/ class=md-nav__link> Agenda </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/cloud-native-overview/ class=md-nav__link> What is Cloud-Native? </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/cloud-native-app-dev/ class=md-nav__link> Cloud-Native App Dev </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/containers/ class=md-nav__link> Containers Overview </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-overview/ class=md-nav__link> Kubernetes 'overview' </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/openshift/ class=md-nav__link> Openshift 'overview' </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-core-concepts/ class=md-nav__link> Core Concepts </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-configuration/ class=md-nav__link> Configuration </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-multi-container-pods/ class=md-nav__link> Multi-Container Pods </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-observability/ class=md-nav__link> Observability </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-pod-design/ class=md-nav__link> Pod Design </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-services-networking/ class=md-nav__link> Services & Networking </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-state-persistence/ class=md-nav__link> State Persistence </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/k8s-troubleshooting/ class=md-nav__link> Troubleshoot </a> </li> <li class=md-nav__item> <a href=../../developer-foundation/garage-development/ class=md-nav__link> Garage Method </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Developer Intermediate <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Intermediate" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Developer Intermediate </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-intermediate/ class=md-nav__link> Agenda </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/deploy-app/ class=md-nav__link> Deploy First App </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/continuous-delivery/ class=md-nav__link> Continuous Delivery </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/content-overview/ class=md-nav__link> DevSecOps Overview </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/continuous-integration/ class=md-nav__link> Continuous Integration </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/artifact-management/ class=md-nav__link> Artifact Management </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/code-analysis/ class=md-nav__link> Code Analysis </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_8 type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8> Image Registry <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Image Registry" data-md-level=2> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Image Registry </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-intermediate/ocp-registry/ class=md-nav__link> OpenShift </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/image-registry/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_9 type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9> Log Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Log Management" data-md-level=2> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Log Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-intermediate/log-management/ class=md-nav__link> OpenShift </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/log-management/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_10 type=checkbox id=__nav_3_10> <label class=md-nav__link for=__nav_3_10> Monitoring <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Monitoring data-md-level=2> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Monitoring </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-intermediate/ocp-monitoring/ class=md-nav__link> OpenShift </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/monitoring/ class=md-nav__link> IBM Cloud </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_11 type=checkbox id=__nav_3_11> <label class=md-nav__link for=__nav_3_11> Inventory App <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Inventory App" data-md-level=2> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> Inventory App </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../developer-intermediate/inventory-application/ class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/inventory-prebuilt-solution/ class=md-nav__link> Solution </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/inventory-service/ class=md-nav__link> Service </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/inventory-bff/ class=md-nav__link> BFF </a> </li> <li class=md-nav__item> <a href=../../developer-intermediate/inventory-ui/ class=md-nav__link> UI </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4> Developer Advanced <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Developer Advanced" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Developer Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../inventory-cd/ class=md-nav__link> CD for Inventory App </a> </li> <li class=md-nav__item> <a href=../database-with-cloudant/ class=md-nav__link> Database with Cloudant </a> </li> <li class=md-nav__item> <a href=../database-with-mongodb/ class=md-nav__link> Database with MongoDB </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Authentication with AppID <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Authentication with AppID </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#enable-appid-in-the-solution class=md-nav__link> Enable Appid in the solution </a> <nav class=md-nav aria-label="Enable Appid in the solution"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=#create-binding-secret-for-appid-in-your-namespace class=md-nav__link> Create binding secret for appid in your namespace </a> </li> <li class=md-nav__item> <a href=#update-the-configuration-values-in-the-configuration-files class=md-nav__link> Update the configuration values in the configuration files </a> </li> <li class=md-nav__item> <a href=#adding-the-dependencies class=md-nav__link> Adding the dependencies </a> </li> <li class=md-nav__item> <a href=#activate-the-appid-integration class=md-nav__link> Activate the appid integration </a> </li> <li class=md-nav__item> <a href=#adding-environment-variables-to-deploymentyaml class=md-nav__link> Adding environment variables to deployment.yaml </a> </li> <li class=md-nav__item> <a href=#appid-redirect-url-config class=md-nav__link> AppID redirect url config </a> </li> <li class=md-nav__item> <a href=#add-users-to-appid class=md-nav__link> Add users to AppID </a> </li> <li class=md-nav__item> <a href=#commit-and-push-the-changes class=md-nav__link> Commit and push the changes </a> </li> <li class=md-nav__item> <a href=#access-the-ui class=md-nav__link> Access the UI </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../code-engine/ class=md-nav__link> Code Engine </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> Prerequisites </a> </li> <li class=md-nav__item> <a href=#enable-appid-in-the-solution class=md-nav__link> Enable Appid in the solution </a> <nav class=md-nav aria-label="Enable Appid in the solution"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installation class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=#create-binding-secret-for-appid-in-your-namespace class=md-nav__link> Create binding secret for appid in your namespace </a> </li> <li class=md-nav__item> <a href=#update-the-configuration-values-in-the-configuration-files class=md-nav__link> Update the configuration values in the configuration files </a> </li> <li class=md-nav__item> <a href=#adding-the-dependencies class=md-nav__link> Adding the dependencies </a> </li> <li class=md-nav__item> <a href=#activate-the-appid-integration class=md-nav__link> Activate the appid integration </a> </li> <li class=md-nav__item> <a href=#adding-environment-variables-to-deploymentyaml class=md-nav__link> Adding environment variables to deployment.yaml </a> </li> <li class=md-nav__item> <a href=#appid-redirect-url-config class=md-nav__link> AppID redirect url config </a> </li> <li class=md-nav__item> <a href=#add-users-to-appid class=md-nav__link> Add users to AppID </a> </li> <li class=md-nav__item> <a href=#commit-and-push-the-changes class=md-nav__link> Commit and push the changes </a> </li> <li class=md-nav__item> <a href=#access-the-ui class=md-nav__link> Access the UI </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/ibm-ecosystem-lab/ibm-gsi-cloudnative-journey/edit/main/docs/developer-advanced-1/inventory-appid/index.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg> </a> <h1>Authentication with AppID</h1> <!--- cSpell:ignore ICPA openshiftconsole Theia userid toolset crwexposeservice gradlew bluemix ocinstall Mico crwopenlink crwopenapp swaggerui gitpat gituser  buildconfig yourproject wireframe devenvsetup viewapp crwopenlink  atemplatized rtifactoryurlsetup Kata Koda configmap Katacoda checksetup cndp katacoda checksetup Linespace igccli regcred REPLACEME Tavis pipelinerun openshiftcluster invokecloudshell cloudnative sampleapp bwoolf hotspots multicloud pipelinerun Sricharan taskrun Vadapalli Rossel REPLACEME cloudnativesampleapp artifactoryuntar untar Hotspot devtoolsservices Piyum Zonooz Farr Kamal Arora Laszewski  Roadmap roadmap Istio Packt buildpacks automatable ksonnet jsonnet targetport podsiks SIGTERM SIGKILL minikube apiserver multitenant kubelet multizone Burstable checksetup handson  stockbffnode codepatterns devenvsetup newwindow preconfigured cloudantcredentials apikey Indexyaml classname  errorcondition tektonpipeline gradlew gitsecret viewapp cloudantgitpodscreen crwopenlink cdply crwopenapp --> <p><strong>Securing Inventory App with App ID</strong></p> <p>To secure the application we are using the capabilities available within the IBM Cloud platform to enable integration with AppID.<br> With Openshift 3.11, a simple annotation was used on the ingress to enable Appid. In Openshift 4.x, Red Hat OpenShift on IBM Cloud annotations (ingress.bluemix.net/[annotation]) and NGINX annotations (nginx.ingress.kubernetes.io/[annotation_name]) are not supported for the router or the Ingress resource.<br> With Openshift 4.x, AppID integration is enabled with SDKs.</p> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <p>The following prerequisites are required for AppID integration: </p> <ul> <li>An instance of the App ID service: In IBM Cloud Dashboard, go to "Services" and select the AppID instance.</li> </ul> <p><img alt="AppID Service" src=images/AppIdIntegration01.png></p> <ul> <li> <p>A set of service credentials:</p> <ul> <li>In AppID instance, go to "Application". </li> <li>Click on "Add application".</li> <li>Enter your application name </li> <li>Select the type as Regular web application.</li> <li>Click on Save to create the service credentials for your application.</li> </ul> <p><img alt="AppID Credentials Creation" src=images/AppIdInt02a.png></p> <ul> <li>After saving, your application credentials will get created.Click on the down Arrow at the left end of your application name and get the credentials.</li> </ul> <p><img alt="AppID Credentials Creation" src=images/AppidInt03.png></p> </li> <li> <p><code>yarn</code> version 1.22.19 or higher.</p> </li> <li><code>node</code> version 16.16.0 or higher (it is recommended that you use an LTS version).</li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>To install <code>yarn</code> run the command <code>npm install -g yarn</code></p> </div> <h2 id=enable-appid-in-the-solution>Enable Appid in the solution<a class=headerlink href=#enable-appid-in-the-solution title="Permanent link">&para;</a></h2> <h3 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">&para;</a></h3> <ul> <li>By using the command line, change to the directory that contains your Node.js app.</li> <li> <p>Install the AppID service and other dependencies.</p> <div class=highlight><pre><span></span><code>yarn add ibmcloud-appid passport@0.5.2 express-session
</code></pre></div> </li> <li> <p>Obtain your credentials by navigating to the <strong>Applications</strong> tab of the AppID dashboard as mentioned in <a href=#prerequisites>Prerequisites</a>.</p> </li> <li> <p>Obtain the application as mentioned in <a href=#appid-redirect-url-config>AppID Redirect Url Config</a>.</p> </li> </ul> <h3 id=create-binding-secret-for-appid-in-your-namespace>Create binding secret for appid in your namespace<a class=headerlink href=#create-binding-secret-for-appid-in-your-namespace title="Permanent link">&para;</a></h3> <ul> <li>Login to the IBM Cloud cluster where your workshop-team-one ocp cluster resides. <div class=highlight><pre><span></span><code>ibmcloud login -u <span class=o>[</span>username<span class=o>]</span> -p <span class=o>[</span>password<span class=o>]</span>
</code></pre></div></li> <li>Login to your ocp cluster using the oc cli.</li> </ul> <p><img alt="Openshift cli login Page" src=images/ocp-cli-login.png> </p> <ul> <li> <p>Click on "Copy Login Command". It will redirect to a new page. </p> </li> <li> <p>Click the display token link. Copy the "Log in with this token" command &amp; login to <code>oc</code> cli, it should look like this :</p> <div class=highlight><pre><span></span><code>oc login --token<span class=o>=</span>sha256~bfGcq7l6H3JHd9GwbNRaSsJ7cDAiLK5EPF4tbPQ-WfY --server<span class=o>=</span>https://c108-e.eu-gb.containers.cloud.ibm.com:31718
</code></pre></div> </li> <li> <p>Navigate to your namespace where you are running the inventory solution pipeline and create the binding secret for He the Appid instance on the cloud account <div class=highlight><pre><span></span><code>oc project &lt;PROJECT_NAME&gt;
ibmcloud oc cluster service <span class=nb>bind</span> --cluster workshop-team-one --namespace &lt;PROJECT_NAME&gt; --service workshop-team-one-appid
</code></pre></div></p> </li> </ul> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Save the binding name, you will use it later</p> </div> <h3 id=update-the-configuration-values-in-the-configuration-files>Update the configuration values in the configuration files<a class=headerlink href=#update-the-configuration-values-in-the-configuration-files title="Permanent link">&para;</a></h3> <ul> <li> <p>Put these credentials in <em>server/config/mappings.json</em> to be referred by application: <div class=highlight><span class=filename>server/config/mappings.json</span><pre><span></span><code><span class=p>{</span><span class=w></span>
<span class=w> </span><span class=nt>&quot;APPID_CONFIG&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;&quot;</span><span class=p>{</span><span class=err>\</span><span class=s2>&quot;tenantId\&quot;:\&quot;&lt;tenantId_value&gt;\&quot;,\&quot;oauthServerUrl\&quot;:\&quot;&lt;oauthServer_URL&gt;\&quot;,\&quot;clientId\&quot;: \&quot;&lt;ClientID_value&gt;\&quot;, \&quot;secret\&quot;: \&quot;&lt;secret_value&gt;\&quot;}&quot;</span><span class=p>,</span><span class=w></span>
<span class=w> </span><span class=nt>&quot;application_url&quot;</span><span class=p>:</span><span class=s2>&quot;&lt;openshift_appln_route_url&gt;&quot;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Add the following parameter in <code>values.yaml</code> along with its value: <div class=highlight><span class=filename>chart/base/values.yaml</span><pre><span></span><code><span class=nt>appidBinding</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">&lt;BINDING_NAME&gt;</span><span class=w></span>
</code></pre></div></p> </li> </ul> <h3 id=adding-the-dependencies>Adding the dependencies<a class=headerlink href=#adding-the-dependencies title="Permanent link">&para;</a></h3> <ul> <li>Add the following <em>require</em> definitions to your <code>server/server.js</code>: <div class=highlight><span class=filename>server/server.js</span><pre><span></span><code>const <span class=nv>express</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;express&#39;</span><span class=o>)</span><span class=p>;</span>
const <span class=nv>session</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;express-session&#39;</span><span class=o>)</span>
const <span class=nv>passport</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;passport&#39;</span><span class=o>)</span><span class=p>;</span>
const <span class=nv>WebAppStrategy</span> <span class=o>=</span> require<span class=o>(</span><span class=s2>&quot;ibmcloud-appid&quot;</span><span class=o>)</span>.WebAppStrategy<span class=p>;</span>
const <span class=nv>CALLBACK_URL</span> <span class=o>=</span> <span class=s2>&quot;/ibm/cloud/appid/callback&quot;</span><span class=p>;</span>
const <span class=nv>appidConfig</span> <span class=o>=</span> require<span class=o>(</span><span class=s2>&quot;./config/mappings.json&quot;</span><span class=o>)</span><span class=p>;</span>
</code></pre></div></li> </ul> <h3 id=activate-the-appid-integration>Activate the appid integration<a class=headerlink href=#activate-the-appid-integration title="Permanent link">&para;</a></h3> <ul> <li> <p>In <em>server.js</em>, set up your express app to use express-session middleware. <div class=highlight><span class=filename>server/server.js</span><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>app</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>express</span><span class=p>();</span><span class=w></span>

<span class=kd>const</span><span class=w> </span><span class=nx>appidcfg</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>appidConfig</span><span class=p>.</span><span class=nx>APPID_CONFIG</span><span class=p>;</span><span class=w></span>

<span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=w></span>
<span class=w>  </span><span class=nx>session</span><span class=p>({</span><span class=w></span>
<span class=w>        </span><span class=nx>secret</span><span class=o>:</span><span class=w> </span><span class=nx>appidcfg</span><span class=p>.</span><span class=nx>secret</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>resave</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=p>,</span><span class=w></span>
<span class=w>        </span><span class=nx>saveUninitialized</span><span class=o>:</span><span class=w> </span><span class=kc>true</span><span class=w></span>
<span class=w>  </span><span class=p>})</span><span class=w></span>
<span class=p>);</span><span class=w></span>
<span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>passport</span><span class=p>.</span><span class=nx>initialize</span><span class=p>());</span><span class=w></span>
<span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>passport</span><span class=p>.</span><span class=nx>session</span><span class=p>());</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>In the same file, initialize the SDK using the information obtained in the previous steps. <div class=highlight><span class=filename>server/server.js</span><pre><span></span><code><span class=nx>passport</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=w></span>
<span class=w>  </span><span class=ow>new</span><span class=w> </span><span class=nx>WebAppStrategy</span><span class=p>({</span><span class=w></span>
<span class=w>    </span><span class=nx>tenantId</span><span class=o>:</span><span class=w> </span><span class=nx>appidcfg</span><span class=p>.</span><span class=nx>tenantId</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nx>clientId</span><span class=o>:</span><span class=w> </span><span class=nx>appidcfg</span><span class=p>.</span><span class=nx>clientId</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nx>secret</span><span class=o>:</span><span class=w> </span><span class=nx>appidcfg</span><span class=p>.</span><span class=nx>secret</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nx>oauthServerUrl</span><span class=o>:</span><span class=w> </span><span class=nx>appidcfg</span><span class=p>.</span><span class=nx>oAuthServerUrl</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nx>redirectUri</span><span class=o>:</span><span class=w> </span><span class=nx>appidConfig</span><span class=p>.</span><span class=nx>application_url</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>CALLBACK_URL</span><span class=w></span>
<span class=w>  </span><span class=p>})</span><span class=w></span>
<span class=p>);</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>In the same file, configure passport with serialization and deserialization. This configuration step is required for authenticated session persistence across HTTP requests. For more information, see the <a href=http://www.passportjs.org/docs/ >passport docs</a> <div class=highlight><span class=filename>server/server.js</span><pre><span></span><code><span class=nx>passport</span><span class=p>.</span><span class=nx>serializeUser</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>user</span><span class=p>,</span><span class=w> </span><span class=nx>cb</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>cb</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=nx>user</span><span class=p>);</span><span class=w></span>
<span class=p>});</span><span class=w></span>
<span class=nx>passport</span><span class=p>.</span><span class=nx>deserializeUser</span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>obj</span><span class=p>,</span><span class=w> </span><span class=nx>cb</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>cb</span><span class=p>(</span><span class=kc>null</span><span class=p>,</span><span class=w> </span><span class=nx>obj</span><span class=p>);</span><span class=w></span>
<span class=p>});</span><span class=w></span>
</code></pre></div></p> </li> <li> <p>Add the following code to your <em>server.js</em> to issue the service redirects. <div class=highlight><span class=filename>server/server.js</span><pre><span></span><code><span class=nx>app</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=nx>CALLBACK_URL</span><span class=p>,</span><span class=w> </span><span class=nx>passport</span><span class=p>.</span><span class=nx>authenticate</span><span class=p>(</span><span class=nx>WebAppStrategy</span><span class=p>.</span><span class=nx>STRATEGY_NAME</span><span class=p>));</span><span class=w></span>
<span class=nx>app</span><span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>passport</span><span class=p>.</span><span class=nx>authenticate</span><span class=p>(</span><span class=nx>WebAppStrategy</span><span class=p>.</span><span class=nx>STRATEGY_NAME</span><span class=w> </span><span class=p>));</span><span class=w></span>
</code></pre></div></p> </li> </ul> <h3 id=adding-environment-variables-to-deploymentyaml>Adding environment variables to <code>deployment.yaml</code><a class=headerlink href=#adding-environment-variables-to-deploymentyaml title="Permanent link">&para;</a></h3> <ul> <li>Open the <code>deployment.yaml</code> file and add environment variables that use those values to the top of the existing <code>env</code> block: <div class=highlight><span class=filename>chart/base/templates/deployment.yaml</span><pre><span></span><code><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">APPID_CONFIG</span><span class=w></span>
<span class=w>  </span><span class=nt>valueFrom</span><span class=p>:</span><span class=w></span>
<span class=w>     </span><span class=nt>secretKeyRef</span><span class=p>:</span><span class=w></span>
<span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{{</span><span class=w> </span><span class=nv>.Values.appidBinding | quote</span><span class=w> </span><span class="p p-Indicator">}}</span><span class=w></span>
<span class=w>        </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">binding</span><span class=w></span>
</code></pre></div></li> </ul> <h3 id=appid-redirect-url-config>AppID redirect url config<a class=headerlink href=#appid-redirect-url-config title="Permanent link">&para;</a></h3> <ul> <li> <p>Get the ingress for the UI component by running <code>igc ingress -n dev-{initials}</code>.</p> </li> <li> <p>Open the IBM Cloud resource list - <code>https://cloud.ibm.com/resources</code></p> </li> <li> <p>Open the AppID instance to the <code>Manage Authentication</code> -&gt; <code>Authentication Settings</code> view</p> <p><img alt="AppID authentication settings" src=images/appid-authentication-settings.png></p> </li> <li> <p>Add the redirect url for the application to the web redirect URLs. The redirect url will have the following form:</p> <p><code>{ingress url}/ibm/cloud/appid/callback</code></p> <p>e.g. <code>https://inventory-manangement-ui-dev.sms-test-oc-cluster.us-east.containers.appdomain.cloud/ibm/cloud/appid/callback</code></p> </li> </ul> <h3 id=add-users-to-appid>Add users to AppID<a class=headerlink href=#add-users-to-appid title="Permanent link">&para;</a></h3> <ul> <li> <p>Open the AppID instance to <code>Cloud Directory</code> -&gt; <code>Users</code></p> <p><img alt="AppID cloud directory users" src=images/appid-cloud-directory-users.png></p> </li> <li> <p>Add yourself as a user with an email address, name, and password#</p> </li> </ul> <h3 id=commit-and-push-the-changes>Commit and push the changes<a class=headerlink href=#commit-and-push-the-changes title="Permanent link">&para;</a></h3> <ul> <li>Commit your local changes and push them to your remote repository <div class=highlight><pre><span></span><code>git add .
git commit -m <span class=s2>&quot;Added appid&quot;</span>
git push
</code></pre></div></li> <li>Your previously defined pipeline should be launched and the new app should be deployed afterwards</li> </ul> <h3 id=access-the-ui>Access the UI<a class=headerlink href=#access-the-ui title="Permanent link">&para;</a></h3> <ul> <li> <p>Open a browser to the UI Application URL</p> </li> <li> <p>You should be met with the AppID login screen. (This screen can be customized from the AppID service console but for now we are showing the default screen.)</p> <p><img alt="AppID Login Page" src=images/AppidLogin.png></p> </li> <li> <p>Provide the email address and password you configured in the previous steps. You should be granted access to the UI.</p> </li> </ul> <form class=md-feedback name=feedback hidden> <fieldset> <legend class=md-feedback__title> Was this page helpful? </legend> <div class=md-feedback__inner> <div class=md-feedback__list> <button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"/></svg> </button> <button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"/></svg> </button> </div> <div class=md-feedback__note> <div data-md-value=1 hidden> Thanks for your feedback! </div> <div data-md-value=0 hidden> Thanks for your feedback! </div> </div> </div> </fieldset> </form> </article> </div> </div> </main> <!-- Footer --> <footer class=md-footer> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-column> <div class=md-footer-text><a href=https://develop.cloudnativetoolkit.dev/contribute/contribute/ >Contribute</a> to the Cloud-Native Toolkit</div> <div class=md-footer-text>Site licensed under <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ >CC BY-NC-SA 4.0</a></div> </div> <div class=md-footer-column> <div class=md-footer-text>Have questions? open an issue on <a href=https://github.com/cloud-native-toolkit/planning/issues/new/choose>GitHub</a>.</div> <!-- Copyright and theme information --> <div class=md-footer-text> Copyright Â© 2022 IBM </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.tracking"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.9c69f0bc.min.js></script> <script src=../../javascripts/extra.js></script> </body> </html>